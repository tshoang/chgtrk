%%
%% This is file `chgtrk.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% chgtrk.dtx  (with options: `chgtrk')
%% 
%% This is a generated file.
%% 
%% Copyright (C) 2017 by Thai Son Hoang
%% <T dot S dot Hoang at ecs dot soton dot ac dot uk>
%% 
%% This file may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in:
%% 
%%    http://www.latex-project.org/lppl.txt
%% 
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%% 
%% This work has the LPPL maintenance status "author-maintained".
%% 
%% The Current Maintainer of this work is T. S. Hoang.
%% 

%%%%% BEGIN Package loading %%%%%
\RequirePackage{soul}
\RequirePackage{todonotes}
\RequirePackage{etoolbox}
\RequirePackage{xargs}
%%%%% END Package loading %%%%%


\newcommand{\chgtrk@ifstrequal}{\expandafter\ifstrequal\expandafter}

\newcommand{\CT@contributor}[2][]{%
  \chgtrk@ifstrequal{#1}{}{%
    \expandafter\def\csname #2Added\endcsname{\CT@added[#2]}%
    \expandafter\def\csname #2Deleted\endcsname{\CT@deleted[#2]}%
    \expandafter\def\csname #2Changed\endcsname{\CT@changed[#2]}%
    \expandafter\def\csname #2Commented\endcsname{\CT@commented[#2]}%
    \expandafter\def\csname #2InlineCommented\endcsname{\CT@inlinecommented[#2]}%
  }{%
    \expandafter\def\csname #1Added\endcsname{\CT@added[#2]}%
    \expandafter\def\csname #1Deleted\endcsname{\CT@deleted[#2]}%
    \expandafter\def\csname #1Changed\endcsname{\CT@changed[#2]}%
    \expandafter\def\csname #1Commented\endcsname{\CT@commented[#2]}%
    \expandafter\def\csname #1InlineCommented\endcsname{\CT@inlinecommented[#2]}%
  }%
}%

\let\newCTcontributor\CT@contributor

\newcommandx{\TODOthiswillnotshow}[2][1=]{\todo[disable,#1]{#2}}%

\newcommand{\CT@added}[2][]{%
  \chgtrk@ifstrequal{#1}{}{%
    % Do nothing
  }{%
    \todo[linecolor=orange,backgroundcolor=orange!25,bordercolor=orange]{#1 added}%{}
  }%
  \texthl{#2}%
}%

\newcommand{\CTadded}[1]{%
  \CT@added{#1}%
}%

\newcommand{\CT@deleted}[2][]{%
  \chgtrk@ifstrequal{#1}{}{%
    % Do nothing
  }{%
    \todo[linecolor=red,backgroundcolor=red!25,bordercolor=red]{#1 deleted}%{}
  }%
  \setstcolor{red}%
  \st{#2}%
}%

\newcommand{\CTdeleted}[1]{%
  \CT@deleted{#1}%
}%

\newcommand{\CT@changed}[3][]{%
  \setstcolor{red}%
  \st{#2}%
  \chgtrk@ifstrequal{#1}{}{%
    % Do nothing
  }{%
    \todo[linecolor=blue,backgroundcolor=blue!25,bordercolor=blue]{#1 changed}%{}
  }%
  \texthl{#3}%
  %\todo[linecolor=blue,backgroundcolor=blue!25,bordercolor=blue]{\textbf{Before}:
  %}%
}%

\newcommand{\CTchanged}[2]{%
  \CT@changed{#1}{#2}%
}%

\newcommand{\CT@commented}[2][]{%
  \chgtrk@ifstrequal{#1}{}{%
    \todo[linecolor=green,backgroundcolor=green!25,bordercolor=green]{#2}%{}
  }{%
    \todo[linecolor=green,backgroundcolor=green!25,bordercolor=green]{#1: #2}%{}
  }%
}%

\newcommand{\CTcommented}[1]{%
  \CT@commented{#1}%
}%

\newcommand{\CT@inlinecommented}[2][]{%
  \chgtrk@ifstrequal{#1}{}{%
    \todo[inline, linecolor=green,backgroundcolor=green!25,bordercolor=green]{#2}%{}
  }{%
    \todo[inline, linecolor=green,backgroundcolor=green!25,bordercolor=green]{#1: #2}%{}
  }%
}%

\newcommand{\CTinlinecommented}[1]{%
  \CT@inlinecommented{#1}%
}%

%%%%% BEGIN Declaration of options %%%%%
\DeclareOption{disabled}{%
  \renewcommand{\CT@added}[2][]{%
    #2%
  }%
  \renewcommand{\CT@deleted}[2][]{}%
  \renewcommand{\CT@changed}[3][]{%
    #3%
  }%
  \renewcommand{\CT@commented}[2][]{}%
  \renewcommand{\CT@inlinecommented}[2][]{}%
}%

%%%%% END Declaration of options %%%%%

%%%%% BEGIN Execution of options %%%%%

\ProcessOptions
%%%%% END Execution of options %%%%%

\endinput
%%
%% End of file `chgtrk.sty'.
